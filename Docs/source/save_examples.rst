Save example
============
After executing a few explainers, you can save them to a json file

.. code-block:: python

	from sklearn import linear_model
	import pandas as pd
	import numpy as np
	import matplotlib.pyplot as plt
	from XAI.XAI import XAI

	#load dataset: https://www.kaggle.com/uditkhanna112/startups-in-usamultiple-linear-regression
	df = pd.DataFrame(pd.read_csv("./50_Startups.csv", sep=','))   
	
	#prepare dataset
	df = df.dropna()
	
	X = df[["R&D Spend","Administration","Marketing Spend","State"]]
	y = df[["Profit"]] 
	X = pd.get_dummies(X)
	
	#split dataset in training and testing (score)
	X_train = X[:-10]
	y_train = y[:-10]
	
	X_score = X[-10:]
	y_score = y[-10:]
	
	#create a linear regression model
	regr = linear_model.LinearRegression()
	
	#fit the model
	regr.fit(X_train,y_train)
	
	#create the XAI object using: the predict function (regr.predict), the training input set (X_train), and training output set (y_train)
	xai = XAI(regr.predict, X_train, y_train)
	
	#plot a local explanation
	xai.plot_local(X_train.iloc[0], link="identity", task="regression")
	
	#plot a global explanation
	xai.plot_global(0,X,link="identity", task="regression")
	
	#save the explanation
	xai.exp.save_json("explainers.json")
	
This will result in:

.. code-block:: json

	"0": {
		"meta": {
			"name": "KernelShap",
			"type": ["blackbox"],
			"task": "regression",
			"explanations": ["local", "global"],
			"params": {
				"link": "identity",
				"group_names": null,
				"grouped": false,
				"groups": null,
				"weights": null,
				"summarise_background": false,
				"summarise_result": false,
				"transpose": false,
				"kwargs": {}
			}
		},
		"data": {
			"shap_values": [[[58170.87417182266, -611.6942953788312, 6706.956263514236, -533.536003750989, 63.72418593654584, -1037.6497580543873]]],
			"expected_value": [125770.10124999999],
			"categorical_names": {},
			"feature_names": ["R&D Spend", "Administration", "Marketing Spend", "State_California", "State_Florida", "State_New York"],
			"raw": {
				"raw_prediction": [[188528.77581408923]],
				"prediction": [],
				"instances": [[165349.2, 136897.8, 471784.1, 0.0, 0.0, 1.0]],
				"importances": {
					"0": {
						"ranked_effect": [58170.87417182266, 6706.956263514236, 1037.6497580543873, 611.6942953788312, 533.536003750989, 63.72418593654584],
						"names": ["R&D Spend", "Marketing Spend", "State_New York", "Administration", "State_California", "State_Florida"]
					},
					"aggregated": {
						"ranked_effect": [58170.87417182266, 6706.956263514236, 1037.6497580543873, 611.6942953788312, 533.536003750989, 63.72418593654584],
						"names": ["R&D Spend", "Marketing Spend", "State_New York", "Administration", "State_California", "State_Florida"]
					}
				}
			}
		}
	}, "1": {
		"meta": {
			"name": "KernelShap",
			"type": ["blackbox"],
			"task": "regression",
			"explanations": ["local", "global"],
			"params": {
				"link": "identity",
				"group_names": null,
				"grouped": false,
				"groups": null,
				"weights": null,
				"summarise_background": false,
				"summarise_result": false,
				"transpose": false,
				"kwargs": {}
			}
		},
		"data": {
			"shap_values": [[[58170.87417182266, -611.6942953788312, 6706.956263514236, -533.536003750989, 63.72418593654584, -1037.6497580543873], [56070.88022999449, -1274.6115612989342, 5894.980017988746, 1244.917342085566, 63.72418593657494, 558.7344851062153], [49082.71249231421, 1025.1239057478451, 4847.775116876299, -533.5360037509381, -118.34491673937009, 558.734485106208], [42161.013398062525, 222.73057837945453, 4127.539974651409, -533.536003750949, 63.724185936567665, -1037.6497580543873], [40432.271519880924, 1471.673832921244, 3631.622916732489, -533.5360037509563, -118.34491673937373, 558.734485106208], [32624.21699608072, 1086.0527461645179, 3535.327443391703, -533.5360037509308, 63.72418593659313, -1037.6497580543655], [34714.334898800276, -1083.3003863823214, -3311.6468427715517, 1244.9173420855586, 63.72418593657676, 558.734485106208], [31419.271535226668, -1006.8985212626903, 2400.1656339178335, -533.5360037509672, -118.34491673937919, 558.7344851062007], [23973.61574789686, -1152.8930584846003, 2043.0783888081223, -533.5360037509672, 63.72418593657494, -1037.64975805438], [26104.794771485173, 680.2178834311562, 1849.9764185717831, 1244.917342085555, 63.7241859365804, 558.7344851061935], [9755.294417840305, 592.5476348156376, -357.78131992247836, -533.5360037509627, -118.34491673938919, 558.7344851061862], [8808.04946741988, 1453.4140430804036, 241.5750585699534, 1244.9173420855823, 63.72418593658949, 558.734485106208], [3611.902000694944, -173.2185245997764, 244.3380799440215, -533.5360037509417, -118.34491673937862, 558.7344851061971], [2183.6466261793958, -547.4741695051648, 326.6111251774346, 1244.9173420855443, 63.72418593660177, 558.734485106213], [23516.23454874778, -1511.2979751814164, 438.65748008499213, -533.5360037509545, -118.34491673937555, 558.7344851062007], [19379.876138080865, 42.120087144308854, 591.9153368487896, -533.5360037509636, 63.72418593657039, -1037.6497580544092], [-8485.589539955115, 88.78546972097502, 666.7440355283775, 1244.9173420855623, 63.72418593657267, 558.7344851061989], [4217.446683008542, -986.1829719016046, 1197.5169764257412, -533.5360037509618, 63.7241859365804, -1037.6497580544055], [1998.0091460882388, 428.57029032370815, 1556.9881245799775, -533.5360037509636, -118.34491673937828, 558.7344851062007], [-2069.5299101412147, -1372.4262393421595, -7030.524527324802, -533.5360037509554, 63.7241859365904, -1037.649758054391], [-9828.280560184503, 442.69365449979887, 1666.0326892730195, 1244.91734208557, 63.72418593659404, 558.7344851062217], [-8198.34486616028, -1384.298490624687, 1697.2712243190945, -533.5360037509608, 63.72418593658858, -1037.6497580543983], [-11552.618671313812, 34.5243551904141, 1801.5715686256735, -533.5360037509618, -118.34491673936373, 558.734485106208], [-16484.55537925916, 814.274700762855, 1843.7774553477757, -533.5360037509454, -118.34491673935918, 558.7344851062098], [-9225.223968094559, 1110.4716211705882, -2937.2459449163644, -533.536003750959, 63.72418593659677, -1037.6497580543728], [-18673.326822564108, -733.2626324357234, -3013.3080884837764, 1244.917342085564, 63.72418593657949, 558.7344851062117], [-10534.249448518713, -943.0744117919467, -3127.2343112373237, -533.5360037509672, -118.34491673937191, 558.7344851061989], [-12992.780244445546, -198.1318478313783, 3253.535078563441, -533.5360037509745, 63.72418593657676, -1037.6497580543746], [-17614.888662118276, -2706.1293653052053, -3590.26736738193, -533.536003750949, -118.34491673934099, 558.7344851062044], [-17955.31435639887, -1350.356909052356, -3910.85297160341, -533.5360037509599, 63.7241859365804, -1037.6497580543873], [-20711.294048908887, 361.4768708726424, -4376.951295532241, -533.5360037509636, -118.34491673936645, 558.7344851062007], [-21366.21129458682, -1335.242359312986, -4461.772761364864, -533.536003750949, 63.72418593660768, -1037.6497580543837], [-19631.81397206251, -260.16953417611694, -5688.607246483818, 1244.9173420855586, 63.724185936585855, 558.7344851062007], [-25672.614644464797, 937.5910038616257, -780.7556618196468, -533.5360037509527, -118.34491673934644, 558.7344851062153], [-32593.382612927275, -1563.7873169037484, -892.4860847858909, 1244.9173420855695, 63.72418593659859, 558.7344851062298], [-32907.86653214598, 1762.1314913331043, -1046.230797038941, -533.5360037509454, 63.724185936604044, -1037.64975805438], [-46149.89484003004, -161.1242294381591, -1174.0833580006474, -533.5360037509599, -118.34491673935554, 558.7344851062298], [-34391.615477263134, 3307.9368822749766, -1293.3920710166058, 1244.9173420855586, 63.72418593660768, 558.7344851062189], [-52587.00401842311, 2636.549901380069, -1635.9473203717207, -533.5360037509599, 63.724185936604044, -1037.6497580543873], [-38598.0449196579, 1856.687847134417, -1934.8684376849087, 1244.9173420855623, 63.72418593659495, 558.7344851061862], [-46080.77019844859, 228.4899845623404, -1999.0340693692197, 1244.9173420855805, 63.72418593659859, 558.7344851062226], [-46738.2136952431, 1777.5449991199675, -2241.4415139704943, -533.5360037509599, -118.34491673934463, 558.7344851062226], [-49983.40840384343, 1252.0170400073257, -2721.005818135891, 1244.9173420855805, 63.72418593659313, 558.734485106208], [-56192.338338628186, -176.0533610929524, -5995.835189991463, -533.5360037509527, 63.72418593661132, -1037.6497580543873], [-51100.14114443712, -1431.5782709038394, -6205.469864156199, 1244.917342085566, 63.724185936600406, 558.7344851062226], [-67263.1950070592, -28.210594716838386, -6975.085605576278, -533.5360037509527, 63.72418593660768, -1037.6497580543655], [-67022.60584104703, 353.46818308592265, 1620.8992636221665, -533.5360037509599, -118.34491673933371, 558.7344851062226], [-68026.58840718088, -544.3541096374174, -7030.524527324771, 1244.917342085566, 63.72418593661132, 558.734485106208], [-67612.88616616037, 3286.876592623281, -7030.524527324778, -533.5360037509454, 63.724185936604044, -1037.64975805438], [-68026.58840718088, 300.0132938564566, -5715.168532891294, 1244.9173420855586, 63.724185936618596, 558.7344851062226]]],
			"expected_value": [125770.10124999999],
			"categorical_names": {},
			"feature_names": ["R&D Spend", "Administration", "Marketing Spend", "State_California", "State_Florida", "State_New York"],
			"raw": {
				"raw_prediction": [[188528.7758140892], [188328.72594981265], [180632.56632955425], [170773.92362522462], [171212.52308415054], [161508.23685976822], [157956.86493277474], [158489.49346249766], [149126.4407523516], [156272.46633661643], [135667.0155473493], [138140.5158321986], [129359.97637065506], [129600.26084498003], [148120.5488682672], [144276.55123620515], [119907.41722842256], [128691.4203616639], [129660.52237560778], [113790.15899732306], [119917.92304671669], [116377.26754166535], [115960.43206711815], [111850.45159146737], [113210.64138229092], [105217.57971964474], [111072.39664306787], [114325.26266041773], [101765.6694198105], [101046.11543707659], [100950.18634104736], [97099.4132588666], [102056.88651040591], [100161.17551219309], [92587.82124851146], [92070.67383627946], [78191.85238714705], [95260.40659712361], [72676.23823671648], [88961.25175291995], [79786.16297987293], [78474.84460452228], [76185.08008115638], [61898.412784418666], [68900.28798363122], [49996.148466778955], [60628.71642027698], [52036.01021898532], [52906.10557326939], [54195.733616912694]],
				"prediction": [],
				"instances": [[165349.2, 136897.8, 471784.1, 0.0, 0.0, 1.0], [162597.7, 151377.59, 443898.53, 1.0, 0.0, 0.0], [153441.51, 101145.55, 407934.54, 0.0, 1.0, 0.0], [144372.41, 118671.85, 383199.62, 0.0, 0.0, 1.0], [142107.34, 91391.77, 366168.42, 0.0, 1.0, 0.0], [131876.9, 99814.71, 362861.36, 0.0, 0.0, 1.0], [134615.46, 147198.87, 127716.82, 1.0, 0.0, 0.0], [130298.13, 145530.06, 323876.68, 0.0, 1.0, 0.0], [120542.52, 148718.95, 311613.29, 0.0, 0.0, 1.0], [123334.88, 108679.17, 304981.62, 1.0, 0.0, 0.0], [101913.08, 110594.11, 229160.95, 0.0, 1.0, 0.0], [100671.96, 91790.61, 249744.55, 1.0, 0.0, 0.0], [93863.75, 127320.38, 249839.44, 0.0, 1.0, 0.0], [91992.39, 135495.07, 252664.93, 1.0, 0.0, 0.0], [119943.24, 156547.42, 256512.92, 0.0, 1.0, 0.0], [114523.61, 122616.84, 261776.23, 0.0, 0.0, 1.0], [78013.11, 121597.55, 264346.06, 1.0, 0.0, 0.0], [94657.16, 145077.58, 282574.31, 0.0, 0.0, 1.0], [91749.16, 114175.79, 294919.57, 0.0, 1.0, 0.0], [86419.7, 153514.11, 0.0, 0.0, 0.0, 1.0], [76253.86, 113867.3, 298664.47, 1.0, 0.0, 0.0], [78389.47, 153773.43, 299737.29, 0.0, 0.0, 1.0], [73994.56, 122782.75, 303319.26, 0.0, 1.0, 0.0], [67532.53, 105751.03, 304768.73, 0.0, 1.0, 0.0], [77044.01, 99281.34, 140574.81, 0.0, 0.0, 1.0], [64664.71, 139553.16, 137962.62, 1.0, 0.0, 0.0], [75328.87, 144135.98, 134050.07, 0.0, 1.0, 0.0], [72107.6, 127864.55, 353183.81, 0.0, 0.0, 1.0], [66051.52, 182645.56, 118148.2, 0.0, 1.0, 0.0], [65605.48, 153032.06, 107138.38, 0.0, 0.0, 1.0], [61994.48, 115641.28, 91131.24, 0.0, 1.0, 0.0], [61136.38, 152701.92, 88218.23, 0.0, 0.0, 1.0], [63408.86, 129219.61, 46085.25, 1.0, 0.0, 0.0], [55493.95, 103057.49, 214634.81, 0.0, 1.0, 0.0], [46426.07, 157693.92, 210797.67, 1.0, 0.0, 0.0], [46014.02, 85047.44, 205517.64, 0.0, 0.0, 1.0], [28663.76, 127056.21, 201126.82, 0.0, 1.0, 0.0], [44069.95, 51283.14, 197029.42, 1.0, 0.0, 0.0], [20229.59, 65947.93, 185265.1, 0.0, 0.0, 1.0], [38558.51, 82982.09, 174999.3, 1.0, 0.0, 0.0], [28754.33, 118546.05, 172795.67, 1.0, 0.0, 0.0], [27892.92, 84710.77, 164470.71, 0.0, 1.0, 0.0], [23640.93, 96189.63, 148001.11, 1.0, 0.0, 0.0], [15505.73, 127382.3, 35534.17, 0.0, 0.0, 1.0], [22177.74, 154806.14, 28334.72, 1.0, 0.0, 0.0], [1000.23, 124153.04, 1903.93, 0.0, 0.0, 1.0], [1315.46, 115816.21, 297114.46, 0.0, 1.0, 0.0], [0.0, 135426.92, 0.0, 1.0, 0.0, 0.0], [542.05, 51743.15, 0.0, 0.0, 0.0, 1.0], [0.0, 116983.8, 45173.06, 1.0, 0.0, 0.0]],
				"importances": {
					"0": {
						"ranked_effect": [30489.91250376956, 2973.258034556887, 1001.7951206005177, 775.4056587847236, 721.5656779085889, 81.2028197934782],
						"names": ["R&D Spend", "Marketing Spend", "Administration", "State_California", "State_New York", "State_Florida"]
					},
					"aggregated": {
						"ranked_effect": [30489.91250376956, 2973.258034556887, 1001.7951206005177, 775.4056587847236, 721.5656779085889, 81.2028197934782],
						"names": ["R&D Spend", "Marketing Spend", "Administration", "State_California", "State_New York", "State_Florida"]
					}
				}
			}
		}
	}


	
	
